{"version":3,"sources":["b-table-pkgs/b-table-pkgs.coffee","b-table-pkgs/b-table-pkgs.js"],"names":[],"mappings":"AAAA;EAAA;;EAAA;;EAEA,+BAA+B,qBAAA;ICI3B;MDHF;MACA;MACA;QACE;UAEE;YACE;YACA;YACA;YACA;YACA;UALyB;UAQ3B;QAVsB;QAaxB;UACE;YAAqC;UCGjC;YDH4D;UCK5D;UDJJ;QAFmB;QAKrB;UCKM;QDLiB;QAGvB;QAEA;QACA;UACE;QADwB;MAzBtB;ICgCJ;EDnC2B,CAA/B,CAAA;;EAkCA;ICKI;MDHA;MAAA;MACA;MACA;QACE;UACE;YAAyB;UCOvB;QDRU;MCUd;MACA;IDfJ;EADgC;;ACoBlC","sourcesContent":["module = angular.module 'B.Table.Pkgs', []\n\nmodule.directive \"bTablePkgs\", (bDataSvc, bPoP) ->\n  templateUrl: 'b-table-pkgs/b-table-pkgs.html'\n  restrict: 'E'\n  link: (scope) ->\n    bDataSvc.fetchAllP.then (data) ->\n      # calc period over period totals\n      data.data.packages.forEach (pkgObj) ->\n        pkgObj.priorRank = pkgObj.rank[0] # [prior, current]\n        pkgObj.currentRank = pkgObj.rank[1]\n        pkgObj.rankDelta = pkgObj.priorRank - pkgObj.currentRank\n        pkgObj.installsSum = bPoP.process pkgObj.installs, 7\n        pkgObj.currentInstallsSum = pkgObj.installsSum[1]\n        return\n\n      scope.packages = data.data.packages\n      return\n\n    scope.setPredicate = (predicate) ->\n      if scope.predicate != predicate then scope.reverse = false else scope.reverse = !scope.reverse\n      scope.predicate = predicate\n      return\n\n    scope.checkPredicate = (predicate, reverse) ->\n      scope.predicate == predicate && (reverse == undefined || reverse)\n\n    scope.setPredicate('currentRank')\n\n    scope.hideAngular = true\n    scope.toggleHideAngular = ->\n      scope.hideAngular = !scope.hideAngular\n      return\n\n    return\n\nmodule.filter 'bPredicateFilter', ->\n  (items, predicate) ->\n    predicate = predicate.replace('-', '')\n    filtered = []\n    if items\n      items.forEach (item) ->\n        if item[predicate]? then filtered.push item\n        return\n    filtered\n","(function() {\n  var module;\n\n  module = angular.module('B.Table.Pkgs', []);\n\n  module.directive(\"bTablePkgs\", function(bDataSvc, bPoP) {\n    return {\n      templateUrl: 'b-table-pkgs/b-table-pkgs.html',\n      restrict: 'E',\n      link: function(scope) {\n        bDataSvc.fetchAllP.then(function(data) {\n          data.data.packages.forEach(function(pkgObj) {\n            pkgObj.priorRank = pkgObj.rank[0];\n            pkgObj.currentRank = pkgObj.rank[1];\n            pkgObj.rankDelta = pkgObj.priorRank - pkgObj.currentRank;\n            pkgObj.installsSum = bPoP.process(pkgObj.installs, 7);\n            pkgObj.currentInstallsSum = pkgObj.installsSum[1];\n          });\n          scope.packages = data.data.packages;\n        });\n        scope.setPredicate = function(predicate) {\n          if (scope.predicate !== predicate) {\n            scope.reverse = false;\n          } else {\n            scope.reverse = !scope.reverse;\n          }\n          scope.predicate = predicate;\n        };\n        scope.checkPredicate = function(predicate, reverse) {\n          return scope.predicate === predicate && (reverse === void 0 || reverse);\n        };\n        scope.setPredicate('currentRank');\n        scope.hideAngular = true;\n        scope.toggleHideAngular = function() {\n          scope.hideAngular = !scope.hideAngular;\n        };\n      }\n    };\n  });\n\n  module.filter('bPredicateFilter', function() {\n    return function(items, predicate) {\n      var filtered;\n      predicate = predicate.replace('-', '');\n      filtered = [];\n      if (items) {\n        items.forEach(function(item) {\n          if (item[predicate] != null) {\n            filtered.push(item);\n          }\n        });\n      }\n      return filtered;\n    };\n  });\n\n}).call(this);\n"],"file":"b-table-pkgs/b-table-pkgs.js","sourceRoot":"/source/"}