{"version":3,"sources":["b-table-pkgs/b-table-pkgs.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA,MAAA;;AAAA,EAAA,MAAA,GAAS,OAAO,CAAC,MAAR,CAAe,cAAf,EAA+B,EAA/B,CAAT,CAAA;;AAAA,EAEA,MAAM,CAAC,SAAP,CAAiB,YAAjB,EAA+B,SAAC,QAAD,EAAW,IAAX,GAAA;WAC7B;AAAA,MAAA,WAAA,EAAa,gCAAb;AAAA,MACA,QAAA,EAAU,GADV;AAAA,MAEA,IAAA,EAAM,SAAC,KAAD,GAAA;AACJ,QAAA,QAAQ,CAAC,SAAS,CAAC,IAAnB,CAAwB,SAAC,IAAD,GAAA;AAEtB,UAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAnB,CAA2B,SAAC,MAAD,GAAA;AACzB,YAAA,MAAM,CAAC,SAAP,GAAmB,MAAM,CAAC,IAAK,CAAA,CAAA,CAA/B,CAAA;AAAA,YACA,MAAM,CAAC,WAAP,GAAqB,MAAM,CAAC,IAAK,CAAA,CAAA,CADjC,CAAA;AAAA,YAEA,MAAM,CAAC,SAAP,GAAmB,MAAM,CAAC,SAAP,GAAmB,MAAM,CAAC,WAF7C,CAAA;AAAA,YAGA,MAAM,CAAC,WAAP,GAAqB,IAAI,CAAC,OAAL,CAAa,MAAM,CAAC,QAApB,EAA8B,CAA9B,CAHrB,CAAA;AAAA,YAIA,MAAM,CAAC,kBAAP,GAA4B,MAAM,CAAC,WAAY,CAAA,CAAA,CAJ/C,CADyB;UAAA,CAA3B,CAAA,CAAA;AAAA,UAQA,KAAK,CAAC,QAAN,GAAiB,IAAI,CAAC,IAAI,CAAC,QAR3B,CAFsB;QAAA,CAAxB,CAAA,CAAA;AAAA,QAaA,KAAK,CAAC,YAAN,GAAqB,SAAC,SAAD,GAAA;AACnB,UAAA,IAAG,KAAK,CAAC,SAAN,KAAmB,SAAtB;AAAqC,YAAA,KAAK,CAAC,OAAN,GAAgB,KAAhB,CAArC;WAAA,MAAA;AAAgE,YAAA,KAAK,CAAC,OAAN,GAAgB,CAAA,KAAM,CAAC,OAAvB,CAAhE;WAAA;AAAA,UACA,KAAK,CAAC,SAAN,GAAkB,SADlB,CADmB;QAAA,CAbrB,CAAA;AAAA,QAkBA,KAAK,CAAC,cAAN,GAAuB,SAAC,SAAD,EAAY,OAAZ,GAAA;iBACrB,KAAK,CAAC,SAAN,KAAmB,SAAnB,IAAgC,CAAC,OAAA,KAAW,MAAX,IAAwB,OAAzB,EADX;QAAA,CAlBvB,CAAA;AAAA,QAqBA,KAAK,CAAC,YAAN,CAAmB,aAAnB,CArBA,CAAA;AAAA,QAuBA,KAAK,CAAC,WAAN,GAAoB,IAvBpB,CAAA;AAAA,QAwBA,KAAK,CAAC,iBAAN,GAA0B,SAAA,GAAA;AACxB,UAAA,KAAK,CAAC,WAAN,GAAoB,CAAA,KAAM,CAAC,WAA3B,CADwB;QAAA,CAxB1B,CADI;MAAA,CAFN;MAD6B;EAAA,CAA/B,CAFA,CAAA;;AAAA,EAoCA,MAAM,CAAC,MAAP,CAAc,kBAAd,EAAkC,SAAA,GAAA;WAChC,SAAC,KAAD,EAAQ,SAAR,GAAA;AACE,UAAA,QAAA;AAAA,MAAA,SAAA,GAAY,SAAS,CAAC,OAAV,CAAkB,GAAlB,EAAuB,EAAvB,CAAZ,CAAA;AAAA,MACA,QAAA,GAAW,EADX,CAAA;AAEA,MAAA,IAAG,KAAH;AACE,QAAA,KAAK,CAAC,OAAN,CAAc,SAAC,IAAD,GAAA;AACZ,UAAA,IAAG,uBAAH;AAAyB,YAAA,QAAQ,CAAC,IAAT,CAAc,IAAd,CAAA,CAAzB;WADY;QAAA,CAAd,CAAA,CADF;OAFA;aAMA,SAPF;IAAA,EADgC;EAAA,CAAlC,CApCA,CAAA;AAAA","file":"b-table-pkgs/b-table-pkgs.js","sourceRoot":"/source/","sourcesContent":["module = angular.module 'B.Table.Pkgs', []\n\nmodule.directive \"bTablePkgs\", (bDataSvc, bPoP) ->\n  templateUrl: 'b-table-pkgs/b-table-pkgs.html'\n  restrict: 'E'\n  link: (scope) ->\n    bDataSvc.fetchAllP.then (data) ->\n      # calc period over period totals\n      data.data.packages.forEach (pkgObj) ->\n        pkgObj.priorRank = pkgObj.rank[0] # [prior, current]\n        pkgObj.currentRank = pkgObj.rank[1]\n        pkgObj.rankDelta = pkgObj.priorRank - pkgObj.currentRank\n        pkgObj.installsSum = bPoP.process pkgObj.installs, 7\n        pkgObj.currentInstallsSum = pkgObj.installsSum[1]\n        return\n\n      scope.packages = data.data.packages\n      return\n\n    scope.setPredicate = (predicate) ->\n      if scope.predicate != predicate then scope.reverse = false else scope.reverse = !scope.reverse\n      scope.predicate = predicate\n      return\n\n    scope.checkPredicate = (predicate, reverse) ->\n      scope.predicate == predicate && (reverse == undefined || reverse)\n\n    scope.setPredicate('currentRank')\n\n    scope.hideAngular = true\n    scope.toggleHideAngular = ->\n      scope.hideAngular = !scope.hideAngular\n      return\n\n    return\n\nmodule.filter 'bPredicateFilter', ->\n  (items, predicate) ->\n    predicate = predicate.replace('-', '')\n    filtered = []\n    if items\n      items.forEach (item) ->\n        if item[predicate]? then filtered.push item\n        return\n    filtered\n"]}